"use strict";(globalThis["webpackChunkriskyakbar"]=globalThis["webpackChunkriskyakbar"]||[]).push([[944],{6944:(a,t,i)=>{i.r(t),i.d(t,{default:()=>S});var n=i(9835),e=i(6970);const o={class:"q-pa-md"},s={class:"q-pa-md"},l={class:"q-pa-md"},d={class:"q-pa-md"},r={class:"q-pa-md"},_={class:"q-pa-md"},u={class:"q-pa-md"};function m(a,t,i,m,g,c){const h=(0,n.up)("q-btn"),f=(0,n.up)("q-toolbar-title"),p=(0,n.up)("q-toolbar"),k=(0,n.up)("q-header"),y=(0,n.up)("q-select"),b=(0,n.up)("q-input"),j=(0,n.up)("q-page"),v=(0,n.up)("q-page-container"),w=(0,n.up)("q-layout");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(w,{class:"shadow-2 rounded-borders"},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{class:"bg-primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{flat:"",round:"",dense:"",icon:"book"}),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Data "+(0,e.zw)(this.$route.params.action),1)])),_:1})])),_:1})])),_:1}),(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,{padding:""},{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n.Wm)(y,{outlined:"",modelValue:a.data.f_tahun,"onUpdate:modelValue":t[0]||(t[0]=t=>a.data.f_tahun=t),options:a.datatahun,"option-label":"f_tahun",label:"Tahun","option-value":"f_tahun",onClick:a.pilihmodeltahun},null,8,["modelValue","options","onClick"])]),(0,n._)("div",l,[(0,n.Wm)(y,{outlined:"",modelValue:a.data.f_jenis,"onUpdate:modelValue":t[1]||(t[1]=t=>a.data.f_jenis=t),options:a.datajenis,"option-label":"f_nama",label:"Jenis","option-value":"f_monitoring_jenis_id",onClick:c.pilihmodeljenis},null,8,["modelValue","options","onClick"])]),(0,n._)("div",d,[(0,n.Wm)(b,{outlined:"",label:"TOTAL ANGGARAN",modelValue:a.data.f_total_anggaran_masking,"onUpdate:modelValue":t[2]||(t[2]=t=>a.data.f_total_anggaran_masking=t),onKeyup:t[3]||(t[3]=t=>c.numberFormat("biaya1",a.data.f_total_anggaran_masking)),maxlength:"100",readonly:!a.aksiEdit},null,8,["modelValue","readonly"])]),(0,n._)("div",r,[(0,n.Wm)(b,{outlined:"",label:"TOTAL ANGGARAN TERPAKAI",modelValue:a.data.f_total_anggaran_terpakai_masking,"onUpdate:modelValue":t[4]||(t[4]=t=>a.data.f_total_anggaran_terpakai_masking=t),onKeyup:t[5]||(t[5]=t=>c.numberFormat("biaya3",a.data.f_total_anggaran_terpakai_masking)),maxlength:"100",readonly:!a.aksiEdit},null,8,["modelValue","readonly"])]),(0,n._)("div",_,[(0,n.Wm)(b,{outlined:"",label:"SISA ANGGARAN",modelValue:a.data.f_sisa_anggaran_masking,"onUpdate:modelValue":t[6]||(t[6]=t=>a.data.f_sisa_anggaran_masking=t),onKeyup:t[7]||(t[7]=t=>c.numberFormat("biaya2",a.data.f_sisa_anggaran_masking)),maxlength:"100",readonly:!a.aksiEdit},null,8,["modelValue","readonly"])]),(0,n._)("div",u,[a.aksiEdit?((0,n.wg)(),(0,n.j4)(h,{key:0,color:"primary",icon:"done",label:"Simpan",onClick:t[8]||(t[8]=t=>c.onSave(a.data.f_monitoring_anggaran_id))})):(0,n.kq)("",!0),a.aksiEdit?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(h,{key:1,unelevated:"",color:"amber",label:"Edit",onClick:t[9]||(t[9]=t=>c.openEdit(a.data.f_monitoring_anggaran_id)),icon:"create"}))])])),_:1})])),_:1})])),_:1})])}i(8964),i(4328);var g=i(9981),c=i.n(g),h=i(752);const f={data:()=>({api:h.Z.Host(),message:"",data:[],aksiEdit:!1,aksiSave:!1,f_total_anggaran_masking:"IDR 0",f_total_anggaran:0,f_sisa_anggaran_masking:"IDR 0",f_sisa_anggaran:0,options:"",f_tahun:"",f_jenis:"",datajenis:[]}),mounted(){console.log("alamat",h.Z.Host()),this.Getdata(),this.Getfilter(),"tambah"===this.$route.params.action&&(this.aksiEdit=!0,this.aksiSave=!0),"edit"===this.$route.params.action&&(this.aksiEdit=!0,this.aksiSave=!0),"detail"===this.$route.params.action&&(this.aksiEdit=!1,this.aksiSave=!1)},computed:{pilihmodeljenis(){return this.Getdatapilih(this.data.f_jenis)}},methods:{async Getdatapilih(){const a=this.$route.params.action;"tambah"===a&&(this.jeniselect=this.data.f_jenis.f_monitoring_jenis_id?this.data.f_jenis.f_monitoring_jenis_id:"")},async Getdata(){try{const a=this.$route.params.action;if("detail"===a||"edit"===a){let a=await c().get(this.api+"/anggaran/edit/"+this.$route.params.id,h.Z.authHeader());this.data=a.data}}catch(a){console.error(a)}},async Getfilter(){try{let a=[],t=(new Date).getFullYear();do{a.push({f_tahun:t}),t--}while(t>2001);this.datatahun=a;let i=await c().get(this.api+"/jenis/index",h.Z.authHeader());this.datajenis=i.data}catch(a){console.error(a)}},async openDetail(a){document.location="#/anggaranpageaction/detail/"+a},async openEdit(a){document.location="#/anggaranpageaction/edit/"+a,location.reload()},validation(){return this.data.f_total_anggaran?{code:200,message:""}:{code:500,message:"Total Anggaran ini harus diisi"}},async onSave(){const a=this.validation();if(200===a.code){var t=null;const a=this.$route.params.action;this.data.jenis=this.data.f_monitoring_jenis_id;const i=Object.assign({},this.data);"tambah"===a?(i["f_tahun"]=i.f_tahun.f_tahun,i["f_jenis"]=i.f_jenis.f_monitoring_jenis_id?i.f_jenis.f_monitoring_jenis_id:i.f_jenis,t=await c().post(this.api+"/anggaran/add",i,h.Z.authHeader())):(i["f_tahun"]=i.f_tahun.f_tahun?i.f_tahun.f_tahun:i.f_tahun,i["f_jenis"]=i.f_jenis.f_monitoring_jenis_id?i.f_jenis.f_monitoring_jenis_id:i.f_jenis,t=await c().put(this.api+"/anggaran/edit/"+this.$route.params.id,i,h.Z.authHeader())),200===t.data.code?(this.$q.notify(h.Z.CustomNotify("success",t.data.message,1e3,"center")),document.location="#/anggaranpageaction/detail/"+t.data.data.f_monitoring_anggaran_id,location.reload(),this.aksiEdit=!this.aksiEdit,this.aksiSave=!1):this.$q.notify(h.Z.CustomNotify("error",t.data.message,2e4,"center"))}else this.$q.notify(h.Z.CustomNotify("error",a.message,2e4,"center"))},numberFormat(a,t){if("biaya1"===a){const a=t.replace(/[^\d]+/gi,"");this.data.f_total_anggaran=Number(a),this.data.f_total_anggaran_masking=new Intl.NumberFormat("en-US",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a).replace(/,/g,".")}if("biaya2"===a){const a=t.replace(/[^\d]+/gi,"");this.data.f_sisa_anggaran=Number(a),this.data.f_sisa_anggaran_masking=new Intl.NumberFormat("en-US",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a).replace(/,/g,".")}if("biaya3"===a){const a=t.replace(/[^\d]+/gi,"");this.data.f_total_anggaran_terpakai=Number(a),this.data.f_total_anggaran_terpakai_masking=new Intl.NumberFormat("en-US",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a).replace(/,/g,".")}}}};var p=i(1639),k=i(7605),y=i(6602),b=i(1663),j=i(4455),v=i(1973),w=i(2133),q=i(9885),Z=i(8556),A=i(6611),E=i(9984),N=i.n(E);const V=(0,p.Z)(f,[["render",m]]),S=V;N()(f,"components",{QLayout:k.Z,QHeader:y.Z,QToolbar:b.Z,QBtn:j.Z,QToolbarTitle:v.Z,QPageContainer:w.Z,QPage:q.Z,QSelect:Z.Z,QInput:A.Z})}}]);